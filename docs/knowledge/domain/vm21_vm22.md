# VM-21 and VM-22: Principle-Based Reserving

**Tier**: T1 (Regulatory)
**Source**: NAIC Valuation Manual, PwC insights, industry guidance

---

## Overview

VM-21 and VM-22 are NAIC principle-based reserving (PBR) frameworks for annuities:

| Framework | Applies To | Status |
|-----------|------------|--------|
| **VM-21** | Variable annuities, RILAs with GLWB | Active |
| **VM-22** | Fixed annuities (MYGA, FIA, SPIA, PRT) | Effective 2026-2029 |

---

## VM-21: Variable Annuities

### Scope

- Variable annuities with guaranteed living benefits
- RILAs with GLWB riders (treated as VA for reserving)
- Products with equity-linked guarantees

### Reserve Components

```
VM-21 Reserve = max(
    Conditional Tail Expectation Reserve (CTE),
    Standard Projection Amount,
    Cash Surrender Value Floor
)
```

### CTE Methodology

**CTE70** = Average of worst 30% of scenarios

```python
def cte70(scenario_results: list[float]) -> float:
    """
    Calculate CTE70 (Conditional Tail Expectation at 70%).

    Parameters
    ----------
    scenario_results : list[float]
        Present value of liabilities for each scenario

    Returns
    -------
    float
        Average of worst 30% of scenarios
    """
    sorted_results = sorted(scenario_results, reverse=True)
    n_scenarios = len(sorted_results)
    n_tail = int(n_scenarios * 0.30)
    return sum(sorted_results[:n_tail]) / n_tail
```

### Scenario Requirements

- **Equity scenarios**: AAA generator or approved alternative
- **Interest rate scenarios**: Prescribed or stochastic
- **Number of scenarios**: Typically 1,000-10,000
- **Frequency**: Monthly projection

---

## VM-22: Fixed Annuities

### Scope

- Fixed Indexed Annuities (FIA)
- Multi-Year Guaranteed Annuities (MYGA)
- Single Premium Immediate Annuities (SPIA)
- Pension Risk Transfer (PRT)

### Effective Dates

| Date | Requirement |
|------|-------------|
| January 1, 2026 | Voluntary adoption |
| January 1, 2029 | Mandatory compliance |

**Note**: Initially applies to new business only; retrospective application to post-2017 business under discussion.

### Reserve Determination Flow

```
┌─────────────────────────────────┐
│ Stochastic Exclusion Test       │
│ (Does product require SR?)      │
└─────────────┬───────────────────┘
              │
        ┌─────┴─────┐
        │ Pass      │ Fail
        ▼           ▼
┌───────────────┐ ┌─────────────────────┐
│ Deterministic │ │ Single Scenario     │
│ Reserve (DR)  │ │ Test                │
│ = Current     │ └──────────┬──────────┘
│ Statutory     │      ┌─────┴─────┐
└───────────────┘      │ Pass      │ Fail
                       ▼           ▼
               ┌───────────────┐ ┌───────────────┐
               │ Deterministic │ │ Stochastic    │
               │ Reserve (DR)  │ │ Reserve (SR)  │
               └───────────────┘ └───────────────┘
```

### Key Components

1. **Stochastic Exclusion Test**: Determines if full stochastic modeling required
2. **Single Scenario Test**: Simplified test for less complex products
3. **Deterministic Reserve**: Formulaic reserve if tests pass
4. **Stochastic Reserve**: Full scenario-based reserve if tests fail

---

## Implementation Challenges

### Technical

| Challenge | Description |
|-----------|-------------|
| **Scenario generation** | Interest rate and equity scenarios |
| **Runtime** | Computational cost of stochastic models |
| **Model validation** | Ensuring accuracy and compliance |
| **Assumption setting** | Credible actuarial assumptions |

### Operational

| Challenge | Description |
|-----------|-------------|
| **Documentation** | Regulatory reporting requirements |
| **Asset modeling** | Reserves depend on asset strategy |
| **Governance** | PBR-specific controls and review |
| **Systems** | Integration with existing platforms |

---

## Comparison: CARVM vs VM-22

| Aspect | CARVM (Current) | VM-22 (New) |
|--------|-----------------|-------------|
| **Approach** | Formulaic | Principle-based |
| **Scenarios** | Single | Multiple (potentially) |
| **Assumptions** | Prescribed | Company-specific + margins |
| **Flexibility** | Low | High |
| **Complexity** | Low | High |

---

## Economic Scenario Generators

### For VM-21 (Equity + Rates)

- **AAA Generator**: Academy of Actuaries prescribed generator
- Calibrated to current market conditions
- Produces 1,000+ risk-neutral scenarios

### For VM-22 (Rates)

- Interest rate scenarios for fixed product valuation
- May use deterministic or stochastic rates
- Prescribed shocks for deterministic testing

---

## Implementation Roadmap (Future)

### Phase 1: Documentation (Complete)
- This knowledge doc ✅

### Phase 2: Scenario Generator Integration
- Integrate AAA-style scenario generator
- Or use EconomicScenarioGenerators.jl concepts

### Phase 3: VM-21 Calculator
- Cash flow projection engine
- CTE calculation
- Standard scenario tests

### Phase 4: VM-22 Calculator
- Stochastic exclusion test
- Deterministic reserve
- Stochastic reserve (if required)

---

## Code Structure (Proposed)

```
regulatory/
├── vm21/
│   ├── scenarios.py       # Scenario generation
│   ├── projection.py      # Cash flow projection
│   ├── cte.py             # CTE calculations
│   └── reserve.py         # Full VM-21 reserve
│
├── vm22/
│   ├── exclusion_test.py  # Stochastic exclusion
│   ├── deterministic.py   # Deterministic reserve
│   └── stochastic.py      # Stochastic reserve
│
└── common/
    ├── assumptions.py     # Assumption framework
    └── reporting.py       # Regulatory reports
```

---

## Key Formulas

### CTE Calculation

```
CTE_α = (1 / (1-α)) × ∫_α^1 VaR_p dp
      ≈ mean(worst (1-α)% of scenarios)
```

For CTE70: α = 0.70, so average of worst 30%

### Present Value of Liabilities

```
PV_liabilities = Σ_t [ Benefits(t) - Premiums(t) ] × discount(t)
```

Where Benefits include:
- Death benefits
- Withdrawal benefits (guaranteed)
- Annuitization benefits
- Surrender values

---

## References

- NAIC Valuation Manual (VM-21, VM-22 sections)
- PwC: "Navigating VM-22: Insights and implementation challenges"
- AAA: Economic Scenario Generator documentation
- SOA: PBR implementation resources

---

## Note on Complexity

**VM-21/VM-22 implementation is a significant undertaking.** A full implementation could be a separate project. For annuity-pricing repo, consider:

1. **Simplified CTE calculator** for educational purposes
2. **Scenario integration hooks** for external generators
3. **Reserve validation** against published examples

Full regulatory compliance would require:
- Extensive testing and validation
- Regulatory review
- Ongoing maintenance as rules evolve
